package org.shark.mvc.controller;


import org.shark.mvc.model.dto.BoardDTO;
import org.shark.mvc.model.dto.BoardList;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.SessionAttributes;

@RequestMapping("/d")
@SessionAttributes("boards") // 2. boards 이름의 Model 속성을 세션에 저장한다
@Controller
public class MvcControllerD {
  
  @ModelAttribute("boards")    // 1. 메소드의 반환값을 Model에 boards로 저장
  public BoardList getBoards() {
    return new BoardList(); // 모든 JSP에서 ${boards}로 ArrayList에 접근할 수 있다
  }
  
  @RequestMapping("/regist") // d/regist?title=제목&hit=10
  public String regist(@ModelAttribute(name = "boards") BoardList boardList // 3. Model 속성 boards를 BoardList로 가져온다
                      , BoardDTO board) {
    boardList.add(board);
    return "redirect:/d/list";
  }
  
  
  @RequestMapping("/list")
  public String methodA() {
    return "d/list";
  }
  
  @RequestMapping("/detail")
  public String methodB() {
    return "d/detail";
  }
}
